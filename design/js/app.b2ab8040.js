(function(e){function t(t){for(var r,o,c=t[0],a=t[1],s=t[2],l=0,f=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);d&&d(t);while(f.length)f.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(u.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},i={app:0},u=[];function c(e){return a.p+"js/"+({common:"common"}[e]||e)+"."+{"chunk-025e3432":"7d218f7d",common:"bc7e4232"}[e]+".js"}function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n={"chunk-025e3432":1,common:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({common:"common"}[e]||e)+"."+{"chunk-025e3432":"5eaa4e36",common:"9943b4f7"}[e]+".css",i=a.p+r,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===i))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){s=f[c],l=s.getAttribute("data-href");if(l===r||l===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||i,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete o[e],d.parentNode.removeChild(d),n(u)},d.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){o[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=u);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=c(e);var f=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",f.name="ChunkLoadError",f.type=r,f.request=o,n[1](f)}i[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="https://adangs.github.io/design/",a.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var d=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2e0d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"formatDate",(function(){return Z})),n.d(r,"formatNumber",(function(){return z})),n.d(r,"formatZero",(function(){return Q}));n("456d"),n("ac6a"),n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],c={name:"APP"},a=c,s=n("2877"),l=Object(s["a"])(a,i,u,!1,null,null,null),f=l.exports,d=(n("8e6e"),n("bd86")),p=(n("96cf"),n("3b8d")),h=n("8c4f"),g=n("323e"),m=n.n(g),v=(n("a5d8"),n("a481"),n("28a5"),n("a78e")),b=n.n(v);function E(e,t){return b.a.set(e,t)}function y(e){return b.a.get(e)}var O=function(e,t,n){for(var r=t.replace(/]/g,"").replace(/\[/g,".").split("."),o=e,i=0,u=r.length;i<u;i++)i===u-1?o[r[i]]=n:o=o[r[i]]},w=[{path:"/",redirect:"login",name:"home"},{path:"/login",component:function(){return n.e("common").then(n.bind(null,"7abe"))},name:"login"}],P=n("2f62"),T=(n("6762"),n("2fdb"),n("bc3a")),j=n.n(T),S={login:"/api/v1/login",getUserInfo:"/api/v1/getUserInfo",success:"/api/v1/success",error:"/api/v1/error",page:"/api/v1/page"},_=n("5c96"),k=n.n(_),x=function(e){e={cancel:void 0===e.cancel||e.cancel,loading:void 0===e.loading||e.loading,globalError:void 0===e.globalError||e.globalError,timeout:e.timeout||2e4,url:S[e.url]||e.url,method:e.method||"post",headers:e.headers||{},params:e.params||{},data:e.data||{}};var t=j.a.CancelToken,n=j.a.create({timeout:e.timeout});return n.interceptors.request.use((function(n){return e.cancel&&(F.dispatch("app/removePending",{url:e.url,cancel:!0}),n.cancelToken=new t((function(t){F.dispatch("app/pushPending",{url:e.url,cancel:t})}))),n.headers["token"]="token",e.loading&&F.dispatch("app/setLoading",!0),n}),(function(e){console.log(e),Promise.reject(e)})),n.interceptors.response.use((function(t){F.dispatch("app/removePending",{url:e.url});var n=t.data;if(F.dispatch("app/setLoading",!1),n.success)return Promise.resolve(n.body||{});switch(n.code){case 10001:return Promise.reject(n);default:console.warn("API地址：",t.config.url),console.warn("API结果：",n),_["Message"].error(n.msg||"出错啦~")}return Promise.reject(n)}),(function(e){if(F.dispatch("app/setLoading",!1),console.log("request---\x3e ",e.request),console.log("response---\x3e ",e.response),e.request||e.response){if(e.response&&401===e.response.status)return _["Message"].error("登录状态失效，请重新登录"),Promise.reject(e);var t=[e.message];return e.response&&e.response.data?t=[e.response.data.message,e.response.data.path]:e.request&&e.request.timeout&&(t=["网络繁忙，请稍后再试！"]),_["Message"].error(t.join(" - ")),Promise.reject(e)}return console.log("err---\x3e ",e),Promise.reject(e)})),n(e)},R=x,N=[{path:"/design",component:function(){return n.e("chunk-025e3432").then(n.bind(null,"5651"))}},{path:"*",redirect:"/404",hidden:!0}];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(d["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t){return!t.meta||!t.meta.roles||e.some((function(e){return t.meta.roles.includes(e)}))}function L(e,t){var n=[];return e.forEach((function(e){var r=M({},e);I(t,r)&&(r.children&&(r.children=L(r.children,t)),n.push(r))})),n}var A={namespaced:!0,state:{loading:!1,addRoutes:null,routes:null,pending:{}},mutations:{SET_LOADING:function(e,t){e.loading=t},PUSH_PENDING:function(e,t){e.pending[t.url]=t},REMOVE_PENDING:function(e,t){delete e.pending[t.url]},SET_ROUTES:function(e,t){e.addRoutes=t,e.routes=w.concat(t)}},actions:{setLoading:function(e,t){var n=e.commit,r=e.state;return new Promise((function(e,o){n("SET_LOADING",t),e(r)}))},pushPending:function(e,t){var n=e.commit,r=e.state;return new Promise((function(e,o){n("PUSH_PENDING",t),e(r)}))},removePending:function(e,t){var n=e.commit,r=e.state;return new Promise((function(e,o){r.pending[t.url]&&t.cancel?r.pending[t.url].cancel():r.pending[t.url]&&n("REMOVE_PENDING",t),e(r)}))},getAPI:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,e.next=3,R({url:"success"}).then((function(e){console.log("in vuex... ",e)}));case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),generateRoutes:function(e,t){var n=e.commit;return new Promise((function(e){var r;r=t.includes("admin")?N:L(N,t),n("SET_ROUTES",r),e(r)}))}}},C={namespaced:!0,state:{token:null,roles:[]},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_ROLES:function(e,t){e.roles=t}},actions:{login:function(e,t){var n=e.commit;e.state;return R({url:"login",data:t}).then((function(e){return E("token",e.token),n("SET_TOKEN",e.token),Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},getUserInfo:function(e){var t=e.commit;return R({url:"getUserInfo"}).then((function(e){return t("SET_ROLES",e.roles||[]),t("SET_TOKEN",y("token")),Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}}},U=n("ec26"),H={namespaced:!0,state:{layouts:{scale:1,width:960,height:540,background:{id:Object(U["a"])(),type:"background",color:"#F8F8F8",image:null},elements:[]},current:null,currentIndex:null,currentEditor:null,batchPreview:null},mutations:{SET_LAYOUTS:function(e,t){e.layouts=t},SET_DATA:function(e,t){for(var n in t)O(e.layouts,n,t[n])},SET_ELEMENT:function(e,t){"delete"===t.type?e.layouts.elements.splice(t.index,1):"push"===t.type?e.layouts.elements.push(t.value):e.layouts.elements.splice(t.index,1,t.value)},SET_CURRENT:function(e,t){e.current=t},SET_CURRENT_INDEX:function(e,t){e.currentIndex=t},SET_CURRENT_EDITOR:function(e,t){e.currentEditor=t},SET_BATCH_PREVIEW:function(e,t){e.batchPreview=t}},actions:{setLayouts:function(e,t){var n=e.commit;e.state;return new Promise((function(e,r){n("SET_LAYOUTS",t),e()}))},resetLayouts:function(e,t){var n=e.commit;e.state;return new Promise((function(e,t){n("SET_LAYOUTS",{scale:1,width:960,height:540,background:{id:Object(U["a"])(),type:"background",color:"#F8F8F8",image:null},elements:[]}),e()}))},setData:function(e,t){var n=e.commit;e.state;return new Promise((function(e,r){n("SET_DATA",t),e()}))},setElement:function(e,t){var n=e.commit,r=e.state;return new Promise((function(e,o){n("SET_ELEMENT",t),e({length:r.layouts.elements.length})}))},setCurrent:function(e,t){var n=e.commit;e.state;return new Promise((function(e,r){n("SET_CURRENT",t),e()}))},setCurrentIndex:function(e,t){var n=e.commit;e.state;return new Promise((function(e,r){n("SET_CURRENT_INDEX",t),e()}))},setCurrentEditor:function(e,t){var n=e.commit;e.state;return new Promise((function(e,r){n("SET_CURRENT_EDITOR",t),e()}))},setBatchPreview:function(e,t){var n=e.commit;e.state;return new Promise((function(e,r){n("SET_BATCH_PREVIEW",t),e()}))}}},$={app:A,user:C,design:H},q={loading:function(e){return e.app.loading},token:function(e){return e.user.token},roles:function(e){return e.user.roles}};o["default"].use(P["a"]);var F=new P["a"].Store({modules:$,getters:q});function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(d["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}m.a.configure({showSpinner:!1}),o["default"].use(h["a"]);var G=["/","/login"],K=new h["a"]({mode:"history",routes:w});K.beforeEach(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!y("token")){e.next=13;break}if("/login"!==t.path){e.next=5;break}r({path:"/design"}),e.next=11;break;case 5:if(0!==F.getters.roles.length){e.next=10;break}return e.next=8,F.dispatch("user/getUserInfo").then(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n.roles,e.next=3,F.dispatch("app/generateRoutes",o).then((function(e){K.addRoutes(e),r(B({},t,{replace:!0}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){switch(e.code){case 500:case 401:F.dispatch("user/fedLogOut").then((function(){r({path:"/login"})}));break;default:console.log(e),r()}}));case 8:e.next=11;break;case 10:r();case 11:e.next=14;break;case 13:-1!==G.indexOf(t.path)?r():r("/login?redirect=".concat(encodeURIComponent(t.fullPath)));case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),K.afterEach((function(e,t,n){e.meta.title&&(document.title=e.meta.title),m.a.done()}));var Y=K;function J(e){var t=new e;Object.defineProperties(t,{on:{get:function(){return this.$on.bind(this)}},once:{get:function(){return this.$once.bind(this)}},off:{get:function(){return this.$off.bind(this)}},emit:{get:function(){return this.$emit.bind(this)}}}),Object.defineProperty(e,"bus",{get:function(){return t}}),Object.defineProperty(e.prototype,"$bus",{get:function(){return t}})}"undefined"!==typeof window&&window.Vue&&window.Vue.use(J);var W=J,X=(n("0fae"),n("2e0d"),{install:function(e){e.prototype.$http=R}});n("3b2b"),n("c5f6");function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if(!e)return"-";var n=new Date(Number(e)||(-1!==e.indexOf("T")?e:e.replace(/-/gi,"/"))),r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return t}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.pow(10,t);return n?Math.round(e*r)/r:(Math.round(e*r)/r).toLocaleString()}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t<=0?Math.round(e):(e=Math.round(e*Math.pow(10,t))/Math.pow(10,t),e=Number(e).toFixed(t),e)}o["default"].use(k.a),o["default"].use(W),o["default"].use(X),Object.keys(r).forEach((function(e){o["default"].filter(e,r[e])})),o["default"].directive("xscroll",{bind:function(e,t){var n=e.attributes["x-scroll-container"],r=n?e.querySelector(n.nodeValue):e;r.addEventListener("scroll",(function(){var n=e.attributes["xscroll-threshold"]?e.attributes["xscroll-threshold"].nodeValue:10,r=this.scrollHeight-this.scrollTop-this.clientHeight;r<=n?t.value({type:"bottom",scrollTop:this.scrollTop,scrollHeight:this.scrollHeight,clientHeight:this.clientHeight}):this.scrollTop<=0&&t.value({type:"top",scrollTop:this.scrollTop,scrollHeight:this.scrollHeight,clientHeight:this.clientHeight})}))}}),o["default"].config.productionTip=!1,new o["default"]({router:Y,store:F,render:function(e){return e(f)}}).$mount("#app")}});