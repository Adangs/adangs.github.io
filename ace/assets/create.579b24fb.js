var fe=Object.defineProperty,ve=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var ae=(e,t,i)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,A=(e,t)=>{for(var i in t||(t={}))ge.call(t,i)&&ae(e,i,t[i]);if(ue)for(var i of ue(t))be.call(t,i)&&ae(e,i,t[i]);return e},O=(e,t)=>ve(e,ye(t));import{X as K,_ as V,a as j,b as Q,f as se,V as Y,v as ie,c as Fe,P as he,r as Ce}from"./index.a36d1414.js";import{_ as z,u as U,s as $e}from"./index.e248f560.js";import{d as N,P as W,Q as X,R as re,S as M,U as de,V as Be,W as q,t as R,X as y,v as w,r as u,o as a,x as $,B as s,Y as D,j as o,w as n,i as _,Z as T,_ as P,G as S,O as F,$ as Z,a0 as H,a1 as Se,a2 as ke,a3 as Ee,y as x,A as ee,s as te,F as ne,a4 as De,a5 as Le,a6 as Ae,a7 as Te,a8 as Pe,l as Ie,u as we}from"./vendor.217b36be.js";const ze=N({name:"PPanelConfig",components:{NRadioGroup:W,NRadioButton:X,NRadio:re,NTooltip:M,NColorPicker:de,NSlider:Be,NFormItem:q,XForm:K,XIcon:V,XButton:j},props:{title:{type:String,default:"\u4E3B\u4F53\u6837\u5F0F"},detail:{type:Object,default:()=>{}}},setup(e){const t=R({styles:y(()=>e.detail),stylesKeys:y(()=>Object.keys(e.detail||{})),alignList:[{label:"\u5C45\u5DE6\u663E\u793A",icon:"icon-054",value:"left"},{label:"\u5C45\u4E2D\u663E\u793A",icon:"icon-055",value:"center"},{label:"\u5C45\u53F3\u663E\u793A",icon:"icon-056",value:"right"}],fontSizeList:[{label:"\u5927\uFF0818\u53F7\uFF09",icon:"icon-038",value:18},{label:"\u4E2D\uFF0816\u53F7\uFF09",icon:"icon-038",value:16},{label:"\u5C0F\uFF0814\u53F7\uFF09",icon:"icon-038",value:14}],fontWeightList:[{label:"\u5E38\u89C4",value:"normal"},{label:"\u52A0\u7C97",value:"bold"}]}),i=d=>t.stylesKeys.includes(d);return O(A({},w(t)),{isShowBlock:i})}}),Ue={class:"group"},Ne={class:"dt"},Re={class:"content"},Oe=F("\u91CD\u7F6E"),Ve=F("\u91CD\u7F6E"),je=F("\u91CD\u7F6E"),Me=F("\u91CD\u7F6E"),We=F("\u91CD\u7F6E"),Xe=F("\u91CD\u7F6E");function Je(e,t,i,d,m,f){const v=u("x-icon"),h=u("n-tooltip"),g=u("n-radio-button"),p=u("n-radio-group"),r=u("n-form-item"),C=u("n-radio"),b=u("n-color-picker"),L=u("x-button"),E=u("n-slider"),c=u("x-form");return a(),$("div",Ue,[s("div",Ne,D(e.title),1),s("div",Re,[o(c,{ref:"formRef",model:e.styles,"label-width":120,"label-placement":"left"},{default:n(()=>[e.isShowBlock("textAlign")?(a(),_(r,{key:0,"label-align":"left",label:"\u5BF9\u9F50\u65B9\u5F0F"},{default:n(()=>[o(p,{value:e.styles.textAlign,"onUpdate:value":t[0]||(t[0]=l=>e.styles.textAlign=l),style:{"background-color":"#fff"}},{default:n(()=>[(a(!0),$(T,null,P(e.alignList,(l,B)=>(a(),_(g,{key:B,value:l.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:l.icon},null,8,["name"])]),default:n(()=>[F(" "+D(l.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):S("",!0),e.isShowBlock("titleFontSize")?(a(),_(r,{key:1,"label-align":"left",label:"\u6807\u9898\u5927\u5C0F"},{default:n(()=>[o(p,{value:e.styles.titleFontSize,"onUpdate:value":t[1]||(t[1]=l=>e.styles.titleFontSize=l),style:{"background-color":"#fff"}},{default:n(()=>[(a(!0),$(T,null,P(e.fontSizeList,(l,B)=>(a(),_(g,{key:B,value:l.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:l.icon,size:l.value},null,8,["name","size"])]),default:n(()=>[F(" "+D(l.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):S("",!0),e.isShowBlock("descFontSize")?(a(),_(r,{key:2,"label-align":"left",label:"\u63CF\u8FF0\u5927\u5C0F"},{default:n(()=>[o(p,{value:e.styles.descFontSize,"onUpdate:value":t[2]||(t[2]=l=>e.styles.descFontSize=l),style:{"background-color":"#fff"}},{default:n(()=>[(a(!0),$(T,null,P(e.fontSizeList,(l,B)=>(a(),_(g,{key:B,value:l.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:l.icon,size:l.value},null,8,["name","size"])]),default:n(()=>[F(" "+D(l.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):S("",!0),e.isShowBlock("buttonFontSize")?(a(),_(r,{key:3,"label-align":"left",label:"\u6309\u94AE\u5927\u5C0F"},{default:n(()=>[o(p,{value:e.styles.buttonFontSize,"onUpdate:value":t[3]||(t[3]=l=>e.styles.buttonFontSize=l),style:{"background-color":"#fff"}},{default:n(()=>[(a(!0),$(T,null,P(e.fontSizeList,(l,B)=>(a(),_(g,{key:B,value:l.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:l.icon,size:l.value},null,8,["name","size"])]),default:n(()=>[F(" "+D(l.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):S("",!0),e.isShowBlock("titleFontWeight")?(a(),_(r,{key:4,"label-align":"left",label:"\u6807\u9898\u6587\u5B57\u7C97\u7EC6"},{default:n(()=>[o(p,{value:e.styles.titleFontWeight,"onUpdate:value":t[4]||(t[4]=l=>e.styles.titleFontWeight=l)},{default:n(()=>[(a(!0),$(T,null,P(e.fontWeightList,(l,B)=>(a(),_(C,{key:B,value:l.value},{default:n(()=>[F(D(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):S("",!0),e.isShowBlock("descFontWeight")?(a(),_(r,{key:5,"label-align":"left",label:"\u63CF\u8FF0\u6587\u5B57\u7C97\u7EC6"},{default:n(()=>[o(p,{value:e.styles.descFontWeight,"onUpdate:value":t[5]||(t[5]=l=>e.styles.descFontWeight=l)},{default:n(()=>[(a(!0),$(T,null,P(e.fontWeightList,(l,B)=>(a(),_(C,{key:B,value:l.value},{default:n(()=>[F(D(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):S("",!0),e.isShowBlock("buttonFontWeight")?(a(),_(r,{key:6,"label-align":"left",label:"\u6309\u94AE\u6587\u5B57\u7C97\u7EC6"},{default:n(()=>[o(p,{value:e.styles.buttonFontWeight,"onUpdate:value":t[6]||(t[6]=l=>e.styles.buttonFontWeight=l)},{default:n(()=>[(a(!0),$(T,null,P(e.fontWeightList,(l,B)=>(a(),_(C,{key:B,value:l.value},{default:n(()=>[F(D(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):S("",!0),e.isShowBlock("color")?(a(),_(r,{key:7,"label-align":"left",label:"\u6587\u5B57\u989C\u8272"},{default:n(()=>[o(b,{value:e.styles.color,"onUpdate:value":t[7]||(t[7]=l=>e.styles.color=l),"show-alpha":!1},null,8,["value"]),o(L,{type:"primary",size:"tiny",text:"",style:{"margin-left":"10px"}},{default:n(()=>[Oe]),_:1})]),_:1})):S("",!0),e.isShowBlock("titleColor")?(a(),_(r,{key:8,"label-align":"left",label:"\u6807\u9898\u6587\u5B57\u989C\u8272"},{default:n(()=>[o(b,{value:e.styles.titleColor,"onUpdate:value":t[8]||(t[8]=l=>e.styles.titleColor=l),"show-alpha":!1},null,8,["value"]),o(L,{type:"primary",size:"tiny",text:"",style:{"margin-left":"10px"}},{default:n(()=>[Ve]),_:1})]),_:1})):S("",!0),e.isShowBlock("descColor")?(a(),_(r,{key:9,"label-align":"left",label:"\u63CF\u8FF0\u6587\u5B57\u989C\u8272"},{default:n(()=>[o(b,{value:e.styles.descColor,"onUpdate:value":t[9]||(t[9]=l=>e.styles.descColor=l),"show-alpha":!1},null,8,["value"]),o(L,{type:"primary",size:"tiny",text:"",style:{"margin-left":"10px"}},{default:n(()=>[je]),_:1})]),_:1})):S("",!0),e.isShowBlock("buttonColor")?(a(),_(r,{key:10,"label-align":"left",label:"\u6309\u94AE\u6587\u5B57\u989C\u8272"},{default:n(()=>[o(b,{value:e.styles.buttonColor,"onUpdate:value":t[10]||(t[10]=l=>e.styles.buttonColor=l),"show-alpha":!1},null,8,["value"]),o(L,{type:"primary",size:"tiny",text:"",style:{"margin-left":"10px"}},{default:n(()=>[Me]),_:1})]),_:1})):S("",!0),e.isShowBlock("buttonBackgroundColor")?(a(),_(r,{key:11,"label-align":"left",label:"\u6309\u94AE\u80CC\u666F\u989C\u8272"},{default:n(()=>[o(b,{value:e.styles.buttonBackgroundColor,"onUpdate:value":t[11]||(t[11]=l=>e.styles.buttonBackgroundColor=l),"show-alpha":!1},null,8,["value"]),o(L,{type:"primary",size:"tiny",text:"",style:{"margin-left":"10px"}},{default:n(()=>[We]),_:1})]),_:1})):S("",!0),e.isShowBlock("backgroundColor")?(a(),_(r,{key:12,"label-align":"left",label:"\u80CC\u666F\u989C\u8272"},{default:n(()=>[o(b,{value:e.styles.backgroundColor,"onUpdate:value":t[12]||(t[12]=l=>e.styles.backgroundColor=l),"show-alpha":!1},null,8,["value"]),o(L,{type:"primary",size:"tiny",text:"",style:{"margin-left":"10px"}},{default:n(()=>[Xe]),_:1})]),_:1})):S("",!0),e.isShowBlock("marginBottom")?(a(),_(r,{key:13,"label-align":"left",label:"\u5E95\u90E8\u95F4\u8DDD"},{default:n(()=>[o(E,{value:e.styles.marginBottom,"onUpdate:value":t[13]||(t[13]=l=>e.styles.marginBottom=l),max:20},null,8,["value"])]),_:1})):S("",!0)]),_:1},8,["model"])])])}var J=z(ze,[["render",Je]]),Ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:J});const pe=()=>({get:e=>new Promise((t,i)=>{try{const d=U(),m=typeof e=="string"?e:e.join(",");d.dispatch("dictionary/getDictionary",{dictNames:m}).then(f=>{t(f)}).catch(()=>{i()})}catch{}}),find:(e,t)=>{try{const d=($e.getters.dictionary||{})[t],m=d==null?void 0:d.find(f=>f.value===e);return m?m.label:"-"}catch{return"-"}}});const Ke=N({name:"PPanelItem",components:{NSpace:Z,NTooltip:M,NInput:H,NSelect:Se,NFormItem:q,NTag:ke,NEllipsis:Ee,XIcon:V,XForm:K,XUpload:Q,XButton:j},props:{detail:{type:Object,default:()=>{}},isRemove:{type:Boolean,default:!1},isMove:{type:Boolean,default:!0}},emits:["select"],setup(e,{emit:t}){const i=pe(),d=U(),m=R(O(A({},w(e)),{drawerVisible:!1,current:y(()=>d.state.pages.current),formData:e.detail,showTools:y(()=>e.isRemove||e.isMove),linkTypeName:y(()=>i.find(m.formData.linkType,"PAGE_LINK_TYPE")),dictionary:y(()=>d.getters.dictionary),landingTabs:y(()=>m.formData.linkType===1?["pages"]:["product","advertising"]),productInfo:y(()=>{const p=m.formData.productList||[],r=[];if(p[0]){switch(p[0].productType){case 0:r.push("\u5546\u54C1");break;case 1:r.push("\u6295\u653E\u9875");break;default:r.push("\u5FAE\u9875\u9762");break}r.push(p[0].productName)}return r.join(" | ")})})),f=p=>{m.formData.imgUrl=p.fileUrl},v=()=>{const r=m.current.componentContentList.findIndex(C=>C.id===e.detail.id);m.current.componentContentList.splice(r,1)},h=()=>{m.formData.productId=null,m.formData.productList=[]},g=(p,r,C)=>{let b;switch(C){case"advertising":b={productType:1,productName:r.pageName};break;case"product":b={productType:0,productName:r.productTitle};break;default:b={productType:2,productName:r.title};break}m.formData.productList=[b]};return O(A({},w(m)),{handleUploadSuccess:f,handleRemove:v,handleLandingRemove:h,handleLandingChange:g,formatCdn:se})}}),Ye=e=>(x("data-v-805b5834"),e=e(),ee(),e),qe={class:"p-panel-item"},Qe=F(" \u70B9\u51FB\u5220\u9664 "),Ze=F(" \u62D6\u52A8\u6A21\u5757\u8FDB\u884C\u6392\u5E8F "),He={class:"body"},xe={class:"pic"},et=["src"],tt=Ye(()=>s("div",{class:"tips"},"\u66F4\u6362\u56FE\u7247",-1)),nt={class:"form"};function ot(e,t,i,d,m,f){const v=u("x-icon"),h=u("n-tooltip"),g=u("n-space"),p=u("x-upload"),r=u("n-input"),C=u("n-form-item"),b=u("n-select"),L=u("n-ellipsis"),E=u("n-tag"),c=u("x-button"),l=u("x-form");return a(),$("div",qe,[e.showTools?(a(),_(g,{key:0,justify:"end",class:"header"},{default:n(()=>[e.isRemove?(a(),_(h,{key:0,placement:"left"},{trigger:n(()=>[o(v,{name:"icon-036",onClick:e.handleRemove},null,8,["onClick"])]),default:n(()=>[Qe]),_:1})):S("",!0),e.isMove?(a(),_(h,{key:1,placement:"left"},{trigger:n(()=>[o(v,{name:"icon-039 is-move"})]),default:n(()=>[Ze]),_:1})):S("",!0)]),_:1})):S("",!0),s("div",He,[s("div",xe,[o(p,{onSuccess:e.handleUploadSuccess},{default:n(()=>[s("img",{src:e.formatCdn(e.detail.imgUrl)},null,8,et),tt]),_:1},8,["onSuccess"])]),s("div",nt,[o(l,{ref:"formRef",model:e.formData,"onUpdate:model":t[3]||(t[3]=B=>e.formData=B),"label-placement":"left",size:"small"},{default:n(()=>[o(C,{label:"\u6807\u9898",path:"title"},{default:n(()=>[o(r,{value:e.formData.title,"onUpdate:value":t[0]||(t[0]=B=>e.formData.title=B),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["value"])]),_:1}),o(C,{label:"\u7C7B\u578B",path:"linkType"},{default:n(()=>[o(b,{value:e.formData.linkType,"onUpdate:value":[t[1]||(t[1]=B=>e.formData.linkType=B),e.handleLandingRemove],options:e.dictionary.PAGE_LINK_TYPE,placeholder:"\u8BF7\u9009\u62E9\u843D\u5730\u7C7B\u578B"},null,8,["value","options","onUpdate:value"])]),_:1}),o(C,{label:"\u843D\u5730",path:"productId"},{default:n(()=>[e.formData.productId?(a(),_(E,{key:0,type:"info",closable:"",onClose:e.handleLandingRemove},{default:n(()=>[o(L,{style:{"max-width":"149px"}},{default:n(()=>[F(D(e.productInfo),1)]),_:1})]),_:1},8,["onClose"])):S("",!0),o(c,{onClick:t[2]||(t[2]=B=>e.drawerVisible=!0)},{default:n(()=>[F("\u9009\u62E9"+D(e.linkTypeName),1)]),_:1})]),_:1})]),_:1},8,["model"])])])])}var oe=z(Ke,[["render",ot],["__scopeId","data-v-805b5834"]]),lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oe});const ut=N({name:"PPanelBanner",components:{VueDraggable:Y,NRadioGroup:W,NRadioButton:X,NTooltip:M,XButton:j,XIcon:V,XUpload:Q,PPanelConfig:J,PPanelItem:oe},setup(){te(),ne();const e=U(),t=R({current:y(()=>e.state.pages.current),componentStyle:y(()=>{var d;return(d=t.current)==null?void 0:d.componentStyle}),currentTemplateType:y(()=>t.templateTypeList.find(d=>d.value===t.current.templateType)),componentContentList:y(()=>{var d;return((d=t.current)==null?void 0:d.componentContentList)||[]}),templateTypeList:[{label:"\u5C0F\u56FE\u8F6E\u64AD",icon:"icon-031",value:1,size:"750x380"},{label:"\u5927\u56FE\u8F6E\u64AD",icon:"icon-032",value:7,size:"750x750"},{label:"\u5168\u5C4F\u8F6E\u64AD",icon:"icon-034",value:16,size:"710x1046"}]}),i=d=>{t.current.componentContentList.push({id:ie(),title:null,imgUrl:d.fileUrl,linkType:2,productId:null,productInfo:null})};return O(A({},w(t)),{handleUploadSuccess:i})}}),at={key:0,class:"p-panel-template"},st={class:"h1"},it={class:"p-body"},rt={class:"group template"},dt=s("div",{class:"dt"},"\u9009\u62E9\u6A21\u677F",-1),pt={class:"radio"},ct={class:"group"},_t=s("div",{class:"dt"},"Banner\u6837\u5F0F",-1),mt={class:"dd"},ft={class:"content"},vt={key:0,class:"tools-add"},yt=F("\u6DFB\u52A0Banner");function gt(e,t,i,d,m,f){const v=u("x-icon"),h=u("n-tooltip"),g=u("n-radio-button"),p=u("n-radio-group"),r=u("p-panel-item"),C=u("vue-draggable"),b=u("x-button"),L=u("x-upload"),E=u("p-panel-config");return e.current?(a(),$("div",at,[s("div",st,D(e.current.vue_name),1),s("div",it,[s("div",rt,[dt,s("div",pt,[o(p,{value:e.current.templateType,"onUpdate:value":t[0]||(t[0]=c=>e.current.templateType=c)},{default:n(()=>[(a(!0),$(T,null,P(e.templateTypeList,(c,l)=>(a(),_(g,{key:l,value:c.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:c.icon,size:28},null,8,["name"])]),default:n(()=>[F(" "+D(c.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),s("div",ct,[_t,s("div",mt,"\u6700\u591A\u6DFB\u52A05\u4E2A\u5E7F\u544A\uFF0C\u9F20\u6807\u62D6\u8F6C\u8C03\u6574\u5E7F\u544A\u987A\u5E8F\uFF0C\u5EFA\u8BAE\u5C3A\u5BF8"+D(e.currentTemplateType.size)+"\u50CF\u7D20",1),s("div",ft,[o(C,{modelValue:e.current.componentContentList,"onUpdate:modelValue":t[1]||(t[1]=c=>e.current.componentContentList=c),handle:".is-move",group:"panel","item-key":"id"},{item:n(({element:c})=>[o(r,{detail:c,"is-remove":e.current.componentContentList.length>1},null,8,["detail","is-remove"])]),_:1},8,["modelValue"]),e.componentContentList.length<5?(a(),$("div",vt,[o(L,{onSuccess:e.handleUploadSuccess},{default:n(()=>[o(b,{type:"primary",block:""},{default:n(()=>[yt]),_:1})]),_:1},8,["onSuccess"])])):S("",!0)])]),o(E,{detail:e.componentStyle,title:"\u4E3B\u4F53\u6837\u5F0F",class:"group"},null,8,["detail"])])])):S("",!0)}var bt=z(ut,[["render",gt]]),Ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:bt});const ht=N({name:"PPanelBasis",components:{NInput:H,NFormItem:q,NColorPicker:de,XForm:K},setup(){te(),ne();const e=U(),t=R({page:y(()=>e.state.pages.page),styles:y(()=>{var i;return(i=t.page)==null?void 0:i.pageStyle}),rules:{title:{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u6807\u9898",trigger:"blur"}}});return A({},w(t))}}),Ct={class:"p-panel-template"},$t=s("div",{class:"h1"},"\u9875\u9762\u8BBE\u7F6E",-1),Bt={class:"p-body"},St={class:"group"};function kt(e,t,i,d,m,f){const v=u("n-input"),h=u("n-form-item"),g=u("n-color-picker"),p=u("x-form");return a(),$("div",Ct,[$t,s("div",Bt,[s("div",St,[o(p,{ref:"formRef",model:e.page,rules:e.rules,"label-width":80,"label-placement":"left"},{default:n(()=>[o(h,{label:"\u9875\u9762\u6807\u9898",path:"title"},{default:n(()=>[o(v,{value:e.page.title,"onUpdate:value":t[0]||(t[0]=r=>e.page.title=r),placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u6807\u9898"},null,8,["value"])]),_:1}),o(h,{label:"\u80CC\u666F\u8272"},{default:n(()=>[o(g,{value:e.styles.backgroundColor,"onUpdate:value":t[1]||(t[1]=r=>e.styles.backgroundColor=r),"show-alpha":!1},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])])])])}var Et=z(ht,[["render",kt]]),Dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Et});const Lt=N({name:"PPanelNav",components:{VueDraggable:Y,NRadioGroup:W,NRadioButton:X,NTooltip:M,XButton:j,XIcon:V,XUpload:Q,PPanelConfig:J,PPanelItem:oe},setup(){const e=U(),t=R({current:y(()=>e.state.pages.current),componentStyle:y(()=>{var d;return(d=t.current)==null?void 0:d.componentStyle}),currentListType:y(()=>t.listType.find(d=>d.value===t.current.listType)),componentContentList:y(()=>{var d;return((d=t.current)==null?void 0:d.componentContentList)||[]}),templateTypeList:[{label:"\u56FE\u6587\u5206\u7C7B\u5BFC\u822A",icon:"icon-049",value:14}],listType:[{label:"\u4E00\u4E2A",value:1,size:"694x694"},{label:"\u4E8C\u4E2A",value:2,size:"340x340"},{label:"\u4E09\u4E2A",value:3,size:"210x210"},{label:"\u56DB\u4E2A",value:4,size:"150x150"},{label:"\u4E94\u4E2A",value:5,size:"100x100"}]}),i=d=>{t.current.componentContentList.push({id:ie(),title:null,imgUrl:d.fileUrl,linkType:2,productId:null})};return O(A({},w(t)),{handleUploadSuccess:i})}}),At={key:0,class:"p-panel-template"},Tt={class:"h1"},Pt={class:"p-body"},It={class:"group template"},wt=s("div",{class:"dt"},"\u9009\u62E9\u6A21\u677F",-1),zt={class:"radio"},Ut={class:"group"},Nt=s("div",{class:"dt"},"\u6BCF\u6392\u6392\u5217\u65B9\u5F0F",-1),Rt={class:"radio"},Ot={class:"group"},Vt=s("div",{class:"dt"},"Icon\u5206\u7C7B\u6837\u5F0F",-1),jt={class:"dd"},Mt={class:"content"},Wt={key:0,class:"tools-add"},Xt=F("\u6DFB\u52A0Icon");function Jt(e,t,i,d,m,f){const v=u("x-icon"),h=u("n-tooltip"),g=u("n-radio-button"),p=u("n-radio-group"),r=u("p-panel-item"),C=u("vue-draggable"),b=u("x-button"),L=u("x-upload"),E=u("p-panel-config");return e.current?(a(),$("div",At,[s("div",Tt,D(e.current.vue_name),1),s("div",Pt,[s("div",It,[wt,s("div",zt,[o(p,{value:e.current.templateType,"onUpdate:value":t[0]||(t[0]=c=>e.current.templateType=c)},{default:n(()=>[(a(!0),$(T,null,P(e.templateTypeList,(c,l)=>(a(),_(g,{key:l,value:c.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:c.icon,size:28},null,8,["name"])]),default:n(()=>[F(" "+D(c.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),s("div",Ut,[Nt,s("div",Rt,[o(p,{value:e.current.listType,"onUpdate:value":t[1]||(t[1]=c=>e.current.listType=c)},{default:n(()=>[(a(!0),$(T,null,P(e.listType,c=>(a(),_(g,{key:c.value,value:c.value},{default:n(()=>[F(D(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),s("div",Ot,[Vt,s("div",jt,"\u9F20\u6807\u62D6\u62FD\u8C03\u6574\u5E7F\u544A\u987A\u5E8F\uFF0C\u5EFA\u8BAE\u5C3A\u5BF8"+D(e.currentListType.size)+"\u50CF\u7D20\uFF0C \u6216\u540C\u7B49\u6BD4\u4F8B",1),s("div",Mt,[o(C,{modelValue:e.current.componentContentList,"onUpdate:modelValue":t[2]||(t[2]=c=>e.current.componentContentList=c),handle:".is-move",group:"panel","item-key":"id"},{item:n(({element:c})=>[o(r,{detail:c,"is-remove":e.current.componentContentList.length>1},null,8,["detail","is-remove"])]),_:1},8,["modelValue"]),e.componentContentList.length<50?(a(),$("div",Wt,[o(L,{onSuccess:e.handleUploadSuccess},{default:n(()=>[o(b,{type:"primary",block:""},{default:n(()=>[Xt]),_:1})]),_:1},8,["onSuccess"])])):S("",!0)])]),o(E,{detail:e.componentStyle,title:"\u4E3B\u4F53\u6837\u5F0F",class:"group"},null,8,["detail"])])])):S("",!0)}var Gt=z(Lt,[["render",Jt]]),Kt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Gt});const Yt=N({name:"PPanelProduct",components:{VueDraggable:Y,NRadioGroup:W,NRadioButton:X,NRadio:re,NTooltip:M,NSwitch:De,NSpace:Z,NDescriptions:Le,NDescriptionsItem:Ae,XButton:j,XIcon:V,PPanelConfig:J},setup(){const e=U(),t=R({drawerVisible:!1,current:y(()=>e.state.pages.current),componentStyle:y(()=>{var f;return(f=t.current)==null?void 0:f.componentStyle}),formData:y(()=>{var f;return(f=t.current)==null?void 0:f.componentContentList[0]}),contentStyle:y(()=>{var f;return(f=t.current)==null?void 0:f.componentContentList[0].contentStyle}),templateTypeList:[{label:"\u53CC\u6392",icon:"icon-044",value:3},{label:"\u5355\u6392",icon:"icon-045",value:2}],buyingStyleOptions:[{label:"\u6837\u5F0F\u4E00",value:1},{label:"\u6837\u5F0F\u4E8C",value:2},{label:"\u6837\u5F0F\u4E09",value:3},{label:"\u6837\u5F0F\u56DB",value:4},{label:"\u6837\u5F0F\u4E94",value:5},{label:"\u6837\u5F0F\u516D",value:6},{label:"\u6837\u5F0F\u4E03",value:7},{label:"\u6837\u5F0F\u516B",value:8}],signStyleOptions:[{label:"\u6837\u5F0F\u4E00",value:"https://alicdn.madaomall.com/test/feima-uploaded/images/1b/d5/1bd5c6c474245b707e4bfe9c920145b9.png"},{label:"\u6837\u5F0F\u4E8C",value:"https://alicdn.madaomall.com/test/feima-uploaded/images/ee/1a/ee1a0ffcef52ac1a4b1324266a0d5d49.png"},{label:"\u6837\u5F0F\u4E09",value:"https://alicdn.madaomall.com/test/feima-uploaded/images/fa/e3/fae39a36658730c26a5a300375cc7a8e.png"},{label:"\u6837\u5F0F\u56DB",value:"https://alicdn.madaomall.com/test/feima-uploaded/images/3f/f0/3ff091bff1eaa34b41ef7e0c2f0b8294.png"}]}),i=()=>{t.drawerVisible=!0},d=f=>{const h=t.formData.productList.findIndex(g=>g.id===f.productId);t.formData.productList.splice(h,1),t.formData.productId=t.formData.productId.filter(g=>g!==f.productId)},m=()=>{e.dispatch("store-manage/getPagesProductsInfo",{productIds:t.formData.productId}).then(f=>{t.formData.productList=f.data})};return O(A({},w(t)),{handleSelectProduct:i,handleRemoveProduct:d,handleSubmitLanding:m,formatCdn:se})}}),G=e=>(x("data-v-81bc57b4"),e=e(),ee(),e),qt={key:0,class:"p-panel-template"},Qt={class:"h1"},Zt={class:"p-body"},Ht={class:"group template"},xt=G(()=>s("div",{class:"dt"},"\u9009\u62E9\u6A21\u677F",-1)),en={class:"radio"},tn={class:"group"},nn=G(()=>s("div",{class:"dt"},"\u5546\u54C1/\u63A8\u5E7F\u9875",-1)),on={class:"content"},ln={class:"product"},un=["src"],an={class:"remove"},sn=F(" \u70B9\u51FB\u5220\u9664 "),rn={class:"tools-add"},dn=F("\u6DFB\u52A0"),pn={class:"group"},cn=G(()=>s("div",{class:"dt"},"\u5C55\u793A\u6837\u5F0F",-1)),_n={style:{display:"flex","align-items":"center"}},mn=G(()=>s("span",{style:{flex:"1"}},"\u8D2D\u4E70\u6309\u94AE",-1)),fn={key:0,style:{padding:"5px"}},vn={style:{display:"flex","align-items":"center"}},yn=G(()=>s("span",{style:{flex:"1"}},"\u5546\u54C1\u89D2\u6807",-1)),gn={key:0,style:{padding:"5px"}};function bn(e,t,i,d,m,f){var I;const v=u("x-icon"),h=u("n-tooltip"),g=u("n-radio-button"),p=u("n-radio-group"),r=u("vue-draggable"),C=u("x-button"),b=u("n-switch"),L=u("n-radio"),E=u("n-space"),c=u("n-descriptions-item"),l=u("n-descriptions"),B=u("p-panel-config");return e.current?(a(),$("div",qt,[s("div",Qt,D(e.current.vue_name),1),s("div",Zt,[s("div",Ht,[xt,s("div",en,[o(p,{value:e.current.templateType,"onUpdate:value":t[0]||(t[0]=k=>e.current.templateType=k)},{default:n(()=>[(a(!0),$(T,null,P(e.templateTypeList,(k,le)=>(a(),_(g,{key:le,value:k.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:k.icon,size:28},null,8,["name"])]),default:n(()=>[F(" "+D(k.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),s("div",tn,[nn,s("div",on,[((I=e.formData.productList)==null?void 0:I.length)?(a(),_(r,{key:0,modelValue:e.formData.productList,"onUpdate:modelValue":t[1]||(t[1]=k=>e.formData.productList=k),group:"panel","item-key":"productId",class:"product-list"},{item:n(({element:k})=>[s("div",ln,[s("img",{src:e.formatCdn(k.productPic)},null,8,un),o(h,{placement:"left"},{trigger:n(()=>[s("div",an,[o(v,{name:"icon-036",onClick:Te(le=>e.handleRemoveProduct(k),["stop"])},null,8,["onClick"])])]),default:n(()=>[sn]),_:2},1024)])]),_:1},8,["modelValue"])):S("",!0),s("div",rn,[o(C,{type:"primary",block:"",onClick:e.handleSelectProduct},{default:n(()=>[dn]),_:1},8,["onClick"])])])]),s("div",pn,[cn,o(l,{column:1,bordered:""},{default:n(()=>[o(c,{"content-style":"padding: 0"},{label:n(()=>[s("div",_n,[mn,o(b,{value:e.contentStyle.buying.enable,"onUpdate:value":t[2]||(t[2]=k=>e.contentStyle.buying.enable=k)},null,8,["value"])])]),default:n(()=>[e.contentStyle.buying.enable?(a(),$("div",fn,[o(p,{value:e.contentStyle.buying.value,"onUpdate:value":t[3]||(t[3]=k=>e.contentStyle.buying.value=k)},{default:n(()=>[o(E,null,{default:n(()=>[(a(!0),$(T,null,P(e.buyingStyleOptions,k=>(a(),_(L,{key:k.value,value:k.value},{default:n(()=>[F(D(k.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])])):S("",!0)]),_:1}),o(c,{"content-style":"padding: 0"},{label:n(()=>[s("div",vn,[yn,o(b,{value:e.contentStyle.sign.enable,"onUpdate:value":t[4]||(t[4]=k=>e.contentStyle.sign.enable=k)},null,8,["value"])])]),default:n(()=>[e.contentStyle.sign.enable?(a(),$("div",gn,[o(p,{value:e.contentStyle.sign.value,"onUpdate:value":t[5]||(t[5]=k=>e.contentStyle.sign.value=k)},{default:n(()=>[o(E,null,{default:n(()=>[(a(!0),$(T,null,P(e.signStyleOptions,k=>(a(),_(L,{key:k.value,value:k.value},{default:n(()=>[F(D(k.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])])):S("",!0)]),_:1})]),_:1})]),o(B,{detail:e.componentStyle,title:"\u4E3B\u4F53\u6837\u5F0F",class:"group"},null,8,["detail"])])])):S("",!0)}var Fn=z(Yt,[["render",bn],["__scopeId","data-v-81bc57b4"]]),hn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fn});const Cn=N({name:"PPanelSort",components:{VueDraggable:Y,NEmpty:Pe,XIcon:V},setup(){const e=U(),t=R({page:y(()=>e.state.pages.page)}),i=d=>{const f=t.page.componentList.findIndex(v=>v.id===d.id);t.page.componentList.splice(f,1)};return O(A({},w(t)),{handleRemove:i})}}),$n=e=>(x("data-v-1f931a3e"),e=e(),ee(),e),Bn={class:"p-panel-template"},Sn=$n(()=>s("div",{class:"h1"},"\u7EC4\u4EF6\u7BA1\u7406",-1)),kn={class:"p-body"},En={key:0,class:"p-panel-sort"},Dn={class:"item"},Ln={class:"before"},An={class:"name"},Tn={class:"after"};function Pn(e,t,i,d,m,f){const v=u("x-icon"),h=u("vue-draggable"),g=u("n-empty");return a(),$("div",Bn,[Sn,s("div",kn,[e.page.componentList&&e.page.componentList.length?(a(),$("div",En,[o(h,{modelValue:e.page.componentList,"onUpdate:modelValue":t[0]||(t[0]=p=>e.page.componentList=p),handle:".is-move",group:"panel","item-key":"id"},{item:n(({element:p})=>[s("div",Dn,[s("div",Ln,[o(v,{size:18,name:"icon-057",class:"is-move"})]),s("div",An,D(p.vue_name),1),s("div",Tn,[o(v,{size:18,name:"icon-036",onClick:r=>e.handleRemove(p)},null,8,["onClick"])])])]),_:1},8,["modelValue"])])):(a(),_(g,{key:1,description:"\u8BD5\u7740\u6DFB\u52A0\u51E0\u4E2A\u7EC4\u4EF6\u770B\u770B"}))])])}var In=z(Cn,[["render",Pn],["__scopeId","data-v-1f931a3e"]]),wn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:In});const zn=N({name:"PPanelText",components:{NRadioGroup:W,NRadioButton:X,NTooltip:M,NInput:H,NFormItem:q,XForm:K,XIcon:V,PPanelConfig:J},setup(){const e=U(),t=R({current:y(()=>e.state.pages.current),componentStyle:y(()=>{var i;return(i=t.current)==null?void 0:i.componentStyle}),formData:y(()=>{var i;return(i=t.current)==null?void 0:i.componentContentList[0]}),contentStyle:y(()=>{var i;return(i=t.current)==null?void 0:i.componentContentList[0].contentStyle}),currentTemplateType:y(()=>t.templateTypeList.find(i=>i.value===t.current.templateType)),templateTypeList:[{label:"\u5355\u6392\u6837\u5F0F",icon:"icon-041",value:12},{label:"\u53CC\u6392\u6837\u5F0F",icon:"icon-042",value:13}]});return A({},w(t))}}),Un={key:0,class:"p-panel-template"},Nn={class:"h1"},Rn={class:"p-body"},On={class:"group template"},Vn=s("div",{class:"dt"},"\u9009\u62E9\u6A21\u677F",-1),jn={class:"radio"},Mn={class:"group"},Wn=s("div",{class:"dt"},"\u5185\u5BB9",-1),Xn={class:"content"};function Jn(e,t,i,d,m,f){const v=u("x-icon"),h=u("n-tooltip"),g=u("n-radio-button"),p=u("n-radio-group"),r=u("n-input"),C=u("n-form-item"),b=u("x-form"),L=u("p-panel-config");return e.current?(a(),$("div",Un,[s("div",Nn,D(e.current.vue_name),1),s("div",Rn,[s("div",On,[Vn,s("div",jn,[o(p,{value:e.current.templateType,"onUpdate:value":t[0]||(t[0]=E=>e.current.templateType=E)},{default:n(()=>[(a(!0),$(T,null,P(e.templateTypeList,(E,c)=>(a(),_(g,{key:c,value:E.value},{default:n(()=>[o(h,null,{trigger:n(()=>[o(v,{name:E.icon,size:28},null,8,["name"])]),default:n(()=>[F(" "+D(E.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),s("div",Mn,[Wn,s("div",Xn,[o(b,{ref:"formRef",model:e.formData,"onUpdate:model":t[3]||(t[3]=E=>e.formData=E),size:"small"},{default:n(()=>[o(C,{label:"\u6807\u9898\u5185\u5BB9\uFF1A",path:"title"},{default:n(()=>[o(r,{value:e.formData.title,"onUpdate:value":t[1]||(t[1]=E=>e.formData.title=E),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\u5185\u5BB9"},null,8,["value"])]),_:1}),o(C,{label:"\u63CF\u8FF0\u5185\u5BB9\uFF1A",path:"remark"},{default:n(()=>[o(r,{value:e.formData.remark,"onUpdate:value":t[2]||(t[2]=E=>e.formData.remark=E),type:"textarea",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u5185\u5BB9"},null,8,["value"])]),_:1})]),_:1},8,["model"])])]),o(L,{detail:e.contentStyle,title:"\u6587\u672C\u6837\u5F0F"},null,8,["detail"]),o(L,{detail:e.componentStyle,title:"\u4E3B\u4F53\u6837\u5F0F"},null,8,["detail"])])])):S("",!0)}var Gn=z(zn,[["render",Jn]]),Kn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Gn});const ce={"./p-panel-banner.vue":Ft,"./p-panel-basis.vue":Dt,"./p-panel-config.vue":Ge,"./p-panel-item.vue":lt,"./p-panel-nav.vue":Kt,"./p-panel-product.vue":hn,"./p-panel-sort.vue":wn,"./p-panel-text.vue":Kn},_e={};var me;for(const e in ce)if(/p-panel-/gi.test(e)){const t=ce[e];_e[(me=t.default)==null?void 0:me.name]=t.default}const Yn=A({},_e);const qn=N({name:"PPanel",components:A({},Yn),setup(){const e=U(),t=R({componentName:y(()=>{const i=e.state.pages.current;return i?`p-panel-${i==null?void 0:i.vue_componentsName}`:"p-panel-basis"})});return A({},w(t))}}),Qn={class:"p-panel"};function Zn(e,t,i,d,m,f){return a(),$("div",Qn,[(a(),_(Ie(e.componentName)))])}var Hn=z(qn,[["render",Zn],["__scopeId","data-v-c37e19e2"]]);const xn=N({name:"PageCreate",components:{NSpace:Z,XLayoutMain:Fe,XButton:j,PPreview:he,PPanel:Hn},setup(){const e=we();pe().get(["PAGE_LINK_TYPE"]);const i=ne(),d=te(),m=U(),{query:f}=i,v=R({query:f,loading:!1,detail:null,page:y(()=>m.state.pages.page),showDraft:y(()=>{var p;return!(((p=v.detail)==null?void 0:p.putStatus)===1&&i.name!=="PageCopy")})}),h=p=>new Promise((r,C)=>{const b=JSON.parse(JSON.stringify(v.page,Ce));if(!b.title)return m.dispatch("pages/setCurrent",null),e.warning("\u8BF7\u586B\u5199\u9875\u9762\u6807\u9898"),C("\u8BF7\u586B\u5199\u9875\u9762\u6807\u9898");b.pageStyle=typeof b.pageStyle=="object"?JSON.stringify(b.pageStyle):b.pageStyle;const L=b.componentList,E=L.length;if(!E)return e.warning("\u8BF7\u6DFB\u52A0\u9875\u9762\u6A21\u5757\u6570\u636E"),C("\u8BF7\u6DFB\u52A0\u9875\u9762\u6A21\u5757\u6570\u636E");for(let c=0;c<E;c++){const l=L[c],B=v.page.componentList[c];if(p)switch(l.type){case 1:if(l.componentContentList.length<1)return m.dispatch("pages/setCurrent",B),e.warning("\u8BF7\u6DFB\u52A0Banner\u56FE\u7247"),C("\u8BF7\u6DFB\u52A0Banner\u56FE\u7247");break;case 4:if(l.componentContentList.length<1)return m.dispatch("pages/setCurrent",B),e.warning("\u8BF7\u6DFB\u52A0\u5206\u7C7B\u5BFC\u822A"),C("\u8BF7\u6DFB\u52A0\u5206\u7C7B\u5BFC\u822A");break;case 6:if(!l.componentContentList[0].productId)return m.dispatch("pages/setCurrent",B),e.warning("\u8BF7\u6DFB\u52A0\u5546\u54C1/\u63A8\u5E7F\u9875"),C("\u8BF7\u6DFB\u52A0\u5546\u54C1/\u63A8\u5E7F\u9875");break;case 8:if(!l.componentContentList[0].title&&!l.componentContentList[0].remark)return m.dispatch("pages/setCurrent",B),e.warning("\u6807\u9898\u548C\u63CF\u8FF0\u4E0D\u80FD\u540C\u65F6\u4E3A\u7A7A"),C("\u6807\u9898\u548C\u63CF\u8FF0\u4E0D\u80FD\u540C\u65F6\u4E3A\u7A7A");break}l.componentStyle=typeof l.componentStyle=="object"?JSON.stringify(l.componentStyle):l.componentStyle,delete l.id,l.componentContentList.forEach(I=>{delete I.id,Object.prototype.toString.call(I.productId)==="[object Array]"&&(I.productId=I.productId.join(","),delete I.productList),I.contentStyle=typeof I.contentStyle=="object"?JSON.stringify(I.contentStyle):I.contentStyle})}r(b)}),g=p=>{h(p).then(r=>{localStorage.setItem("page-data",JSON.stringify(r)),e.success("\u4FDD\u5B58\u6210\u529F"),d.push({name:"PagePreview"})})};return O(A({},w(v)),{handleSend:g})}}),eo=F("\u9884\u89C8"),to=F("\u53D1\u5E03");function no(e,t,i,d,m,f){const v=u("p-preview"),h=u("p-panel"),g=u("x-button"),p=u("n-space"),r=u("x-layout-main");return a(),_(r,{"container-style":"height: 100%;padding: 0;display: flex;"},{footer:n(()=>[o(p,{justify:"center"},{default:n(()=>[o(g,{disabled:e.loading,onClick:t[0]||(t[0]=C=>e.handleSend(0,!0))},{default:n(()=>[eo]),_:1},8,["disabled"]),o(g,{disabled:e.loading,type:"primary",onClick:t[1]||(t[1]=C=>e.handleSend(1))},{default:n(()=>[to]),_:1},8,["disabled"])]),_:1})]),default:n(()=>[o(v),o(h)]),_:1})}var so=z(xn,[["render",no]]);export{so as default};
