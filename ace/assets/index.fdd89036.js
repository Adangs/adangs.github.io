var G=Object.defineProperty,J=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var C=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))Z.call(t,r)&&C(e,r,t[r]);return e},w=(e,t)=>J(e,Y(t));var b=(e,t,r)=>(C(e,typeof t!="symbol"?t+"":t,r),r);import{u as Q,a as ee,b as te,d as $,N as oe,c as ne,e as re,f as se,g as ae,z as ie,h as ce,r as i,o as _,i as m,w as c,j as u,k as ue,l as N,m as le,n as de,p as _e,q as pe,s as me,t as L,v as O,x as fe,y as f,A as ge,B as he,T as ve,C as ye,D as $e,E as Ee,F as Se,G as Ce,H as we,I as be,J as Te,K as P}from"./vendor.7363c997.js";const Re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};Re();var g=(e,t)=>{const r=e.__vccOpts||e;for(const[o,n]of t)r[o]=n;return r};const Ie={name:"XMessageContent",setup(){window.$message=Q()}};function Ne(e,t,r,o,n,s){return null}var Le=g(Ie,[["render",Ne]]);const Oe={name:"XDialogContent",setup(){window.$dialog=ee()}};function Pe(e,t,r,o,n,s){return null}var ke=g(Oe,[["render",Pe]]);const Fe={name:"XLoadingContent",setup(){window.$loading=te()}};function Ae(e,t,r,o,n,s){return null}var De=g(Fe,[["render",Ae]]);const xe=$({name:"XApplication",components:{NDialogProvider:oe,NNotificationProvider:ne,NMessageProvider:re,NLoadingBarProvider:se,NConfigProvider:ae,XMessageContent:Le,XDialogContent:ke,XLoadingContent:De},setup(){return{zhCN:ie,dateZhCN:ce,themeOverrides:{common:{primaryColor:"#536FFF",primaryColorHover:"rgba(83, 111, 255, .9)",primaryColorPressed:"#536FFF",primaryColorSuppl:"rgba(83, 111, 255, .9)",successColor:"#22B46B",infoColor:"#536FFF",warningColor:"#FDAA29",errorColor:"#FD494D",textColorBase:"#1F2225",textColorDisabled:"#888"}},loadingBarStyle:{loading:{"background-color":"#54BC2B",height:"3px"}}}}});function je(e,t,r,o,n,s){const a=i("x-loading-content"),l=i("x-dialog-content"),d=i("x-message-content"),S=i("n-message-provider"),y=i("n-notification-provider"),H=i("n-dialog-provider"),X=i("n-loading-bar-provider"),q=i("n-config-provider");return _(),m(q,{locale:e.zhCN,"date-locale":e.dateZhCN,"theme-overrides":e.themeOverrides},{default:c(()=>[u(X,{"loading-bar-style":e.loadingBarStyle},{default:c(()=>[u(a),u(H,null,{default:c(()=>[u(l),u(y,null,{default:c(()=>[u(S,null,{default:c(()=>[u(d),ue(e.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3},8,["loading-bar-style"])]),_:3},8,["locale","date-locale","theme-overrides"])}var k=g(xe,[["render",je]]);const Be=$({setup(e){return(t,r)=>{const o=i("router-view");return _(),m(le(k),null,{default:c(()=>[u(o,null,{default:c(({Component:n})=>[(_(),m(N(n)))]),_:1})]),_:1})}}}),Ke="modulepreload",F={},ze="/",h=function(t,r){return!r||r.length===0?t():Promise.all(r.map(o=>{if(o=`${ze}${o}`,o in F)return;F[o]=!0;const n=o.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${s}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":Ke,n||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),n)return new Promise((l,d)=>{a.addEventListener("load",l),a.addEventListener("error",d)})})).then(()=>t())};var Me=[{path:"/:pathMatch(.*)*",redirect:"/404",name:"NotFound",component:()=>h(()=>import("./404.a83ae71e.js"),["assets/404.a83ae71e.js","assets/404.c1b8dd08.css","assets/vendor.7363c997.js"])}],Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Me}),Ve={accountId:e=>e.user.userInfo.accountId||null,dictionary:e=>e.dictionary.list||{},page:e=>e.pages.page||{}};const He={list:{}},Xe={SET_DICTIONARY:(e,t)=>{e.list=p(p({},e.list),t)}},qe={getDictionary({commit:e}){return new Promise(t=>{const r={PAGE_LINK_TYPE:[{label:"\u5FAE\u9875\u9762",value:1},{label:"\u5546\u54C1",value:2}]};e("SET_DICTIONARY",r),t(r)})}};var Ge={namespaced:!0,state:He,mutations:Xe,actions:qe},Je=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ge});const Ye={current:null,page:{id:null,title:null,pageStyle:{backgroundColor:"#F8F8F8"},componentList:[]}},We={SET_CURRENT:(e,t)=>{e.current=t||null}},Ze={setCurrent({commit:e},t){return new Promise((r,o)=>{e("SET_CURRENT",t),r(t)})},removeComponent({commit:e,state:t},r){return new Promise((o,n)=>{const s=t.page.componentList.findIndex(a=>a.id===r.id);t.page.componentList.splice(s,1),o(!0)})}};var Qe={namespaced:!0,state:Ye,mutations:We,actions:Ze},et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Qe});function tt(e,t){var r;return((r=t==null?void 0:t.meta)==null?void 0:r.authority)?e.includes(t.meta.authority):!0}function A(e,t){const r=[];return e.forEach(o=>{const n=p({},o);tt(t,n)&&(n.children&&(n.children=A(n.children,t)),r.push(n))}),r}const ot=()=>({permissionRoutes:[]}),nt={generateRoutes({commit:e,rootState:t}){const r=t.user.userInfo.authorizationList;return new Promise(o=>{const n=A(V,r);e("SET_ROUTES",n),o(n)})}},rt={SET_ROUTES:(e,t)=>{e.permissionRoutes=t}};var st={namespaced:!0,state:ot,actions:nt,mutations:rt},at=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:st});const D=60*60*24*7,x=({prefixKey:e="",storage:t=localStorage}={})=>{const r=class{constructor(){b(this,"storage",t);b(this,"prefixKey",e)}getKey(o){return`${this.prefixKey}${o}`.toUpperCase()}set(o,n,s=D){const a=JSON.stringify({value:n,expire:s!==null?new Date().getTime()+s*1e3:null});this.storage.setItem(this.getKey(o),a)}get(o,n=null){const s=this.storage.getItem(this.getKey(o));if(s)try{const a=JSON.parse(s),{value:l,expire:d}=a;if(d===null||d>=Date.now())return l;this.remove(this.getKey(o))}catch{return n}return n}remove(o){this.storage.removeItem(this.getKey(o))}clear(){this.storage.clear()}setCookie(o,n,s=D){document.cookie=`${this.getKey(o)}=${n}; Max-Age=${s}`}getCookie(o){const n=document.cookie.split("; ");for(let s=0,a=n.length;s<a;s++){const l=n[s].split("=");if(l[0]===this.getKey(o))return l[1]}return""}removeCookie(o){this.setCookie(o,1,-1)}clearCookie(){const o=document.cookie.match(/[^ =;]+(?==)/g);if(o)for(let n=o.length;n--;)document.cookie=o[n]+"=0;expire="+new Date(0).toUTCString()}};return new r},E=x(),it=x({storage:sessionStorage}),ct={token:E.get("token")||null,userInfo:{accountId:null,userName:null,authorizationList:[]}},ut={SET_TOKEN:(e,t)=>{e.token=t},SET_USERINFO:(e,t)=>{e.userInfo=t}},lt={async login({commit:e}){return new Promise((t,r)=>{const o=+new Date;e("SET_TOKEN",o),E.set("token",o),t(o)})},getUserInfo({commit:e}){return new Promise((t,r)=>{const o={accountId:1,userName:"Adang",authorizationList:["admin"]};e("SET_USERINFO",o),t(o)})},logout({commit:e}){return new Promise(t=>{e("SET_TOKEN",null),e("SET_USERINFO",{accountId:null,userName:null,authorizationList:[]}),it.clear(),E.remove("token"),t(null)})}};var dt={namespaced:!0,state:ct,mutations:ut,actions:lt},_t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:dt});const j={"./modules/dictionary.ts":Je,"./modules/pages.ts":et,"./modules/permission.ts":at,"./modules/user.ts":_t},B={};for(const e in j)B[e.replace(/(\.\/modules\/|\.ts)/g,"")]=j[e].default;const v=de({modules:B,getters:Ve}),K=Symbol();function pt(e){e.use(v,K)}function mt(){return _e(K)}const ft=$({name:"XHeader",components:{NDropdown:pe},setup(){const e=mt(),t=me(),r=L({options:[{label:"\u9000\u51FA",key:"logout"}]}),o=()=>{e.dispatch("user/logout").then(()=>{t.push({name:"Login"})})};return w(p({},O(r)),{handleSelect:o})}}),z=e=>(ge("data-v-2a7f445d"),e=e(),he(),e),gt={class:"x-header"},ht=z(()=>f("h1",null,"LOGO",-1)),vt={class:"avatar"},yt=z(()=>f("div",{class:"flex"},[f("div",{class:"pic"},[f("svg",{height:"32","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"32","data-view-component":"true"},[f("path",{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})])]),f("div",{class:"user-name"},"Github")],-1));function $t(e,t,r,o,n,s){const a=i("n-dropdown");return _(),fe("div",gt,[ht,f("div",vt,[u(a,{options:e.options,trigger:"hover","show-arrow":"",onSelect:e.handleSelect},{default:c(()=>[yt]),_:1},8,["options","onSelect"])])])}var Et=g(ft,[["render",$t],["__scopeId","data-v-2a7f445d"]]);const St={};function Ct(e,t){const r=i("router-view");return _(),m(r,null,{default:c(({Component:o})=>[u(ve,{name:"fade"},{default:c(()=>[(_(),m(N(o)))]),_:2},1024)]),_:1})}var wt=g(St,[["render",Ct]]);const bt=$({name:"Layout",components:{NLayout:ye,NLayoutHeader:$e,NLayoutContent:Ee,THeader:Et,TContent:wt},setup(){const e=Se(),{query:t}=e,r=L({query:t});return p({},O(r))}});function Tt(e,t,r,o,n,s){const a=i("t-header"),l=i("n-layout-header"),d=i("t-content"),S=i("n-layout-content"),y=i("n-layout");return _(),m(y,{"content-style":"display: flex; flex-direction: column; overflow: hidden; height: 100vh;"},{default:c(()=>[e.query.hideHeader?Ce("",!0):(_(),m(l,{key:0,bordered:""},{default:c(()=>[u(a,{outer:""})]),_:1})),u(y,{class:"main-content-layout"},{default:c(()=>[u(S,{"native-scrollbar":!1},{default:c(()=>[u(d)]),_:1})]),_:1})]),_:1})}var Rt=g(bt,[["render",Tt]]),It=[{path:"/pages",component:we(Rt),redirect:"pages/create",children:[{path:"create",name:"PageCreate",component:()=>h(()=>import("./create.1e15d12b.js"),["assets/create.1e15d12b.js","assets/create.cc14c3a5.css","assets/index.8a80f88f.js","assets/index.db952937.css","assets/vendor.7363c997.js","assets/index.c7d25a5e.js","assets/index.23b29df8.css"]),meta:{title:"\u5FAE\u9875\u9762\u521B\u5EFA"}},{path:"edit",name:"PageEdit",component:()=>h(()=>import("./create.1e15d12b.js"),["assets/create.1e15d12b.js","assets/create.cc14c3a5.css","assets/index.8a80f88f.js","assets/index.db952937.css","assets/vendor.7363c997.js","assets/index.c7d25a5e.js","assets/index.23b29df8.css"]),meta:{title:"\u5FAE\u9875\u9762\u7F16\u8F91"}},{path:"copy",name:"PageCopy",component:()=>h(()=>import("./create.1e15d12b.js"),["assets/create.1e15d12b.js","assets/create.cc14c3a5.css","assets/index.8a80f88f.js","assets/index.db952937.css","assets/vendor.7363c997.js","assets/index.c7d25a5e.js","assets/index.23b29df8.css"]),meta:{title:"\u5FAE\u9875\u9762\u590D\u5236"}},{path:"preview",name:"PagePreview",component:()=>h(()=>import("./preview.7875cda9.js"),["assets/preview.7875cda9.js","assets/preview.c6e6dab6.css","assets/index.c7d25a5e.js","assets/index.23b29df8.css","assets/vendor.7363c997.js","assets/index.8a80f88f.js","assets/index.db952937.css"]),meta:{title:"\u5FAE\u9875\u9762\u9884\u89C8"}}]}],Nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:It});const Lt=["/","/404"];function Ot(e){e.beforeEach(async(t,r,o)=>{const n=window.$loading||null;if(n&&n.start(),E.get("token"))if(t.path==="/login")o({path:"#/"});else{const{accountId:s}=v.getters;if(s)o();else try{await v.dispatch("user/getUserInfo"),await v.dispatch("permission/generateRoutes"),v.state.permission.permissionRoutes.forEach(l=>{e.addRoute(l)}),o(w(p({},t),{replace:!0}))}catch{o(`#/login?redirect=${t.fullPath}`)}}else Lt.includes(t.path)?o():o(`#/login?redirect=${t.fullPath}`)}),e.afterEach((t,r,o)=>{const n=window.$loading||null;n&&n.finish()}),e.onError(t=>{console.log(t,"\u8DEF\u7531\u9519\u8BEF")})}var Pt=[{path:"/",name:"Login",component:()=>h(()=>import("./index.81cd68ce.js"),["assets/index.81cd68ce.js","assets/index.573deecf.css","assets/index.8a80f88f.js","assets/index.db952937.css","assets/vendor.7363c997.js"]),meta:{hidden:!1}},{path:"/404",component:()=>h(()=>import("./404.a83ae71e.js"),["assets/404.a83ae71e.js","assets/404.c1b8dd08.css","assets/vendor.7363c997.js"]),meta:{hidden:!1}}],kt=["pages","error"];const M={"./modules/error.ts":Ue,"./modules/pages.ts":Nt},U=Object.keys(M).reduce((e,t)=>{const r=t.replace(/^\.\/modules\/(.*)\.\w+$/,"$1"),o=M[t];return e[r]=o.default,e},{}),V=[];kt.forEach(e=>{U[e]&&V.push(...U[e])});const T=be({routes:Pt,history:Te()});function Ft(e){e.use(T),Ot(T)}const At=P(k);At.mount("#appProvider",!0);const R=P(Be);pt(R);Ft(R);T.isReady().then(()=>R.mount("#app"));export{g as _,E as l,v as s,mt as u};
